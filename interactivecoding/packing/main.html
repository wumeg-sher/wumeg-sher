<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Packing! </title>

<!-- zimjs.com - JavaScript Canvas Framework -->
<script type="module">

import zim from "https://zimjs.org/cdn/017/zim";

// See Docs under Frame for FIT, FILL, FULL, and TAG
new Frame(FIT, 1024, 768, light, dark, ready);
function ready() {

    // given F (Frame), S (Stage), W (width), H (height)
    // put code here

    const bentoW = 560
    const bentoH = 350

    const bento = new Container(bentoW,bentoH).centerReg().pos(225,200,S);
    new Rectangle ({width:bentoW, height:bentoH, corner:10, color: grey}).addTo(bento);
    const playArea = new Rectangle ({width:bentoW-20, height:bentoH-20, color: light}).center(bento);
    playArea.mouseChildren=true;

    const gridManager = new Grid({
        obj: playArea,
        color: grey,
        numbers: false, 
    });

    const gridTile = new Rectangle (30,30,light,grey)
    const target = new Tile (gridTile, 18, 11).center(playArea)

    const gridBlock = 30




    const apple = new Rectangle(90,90).centerReg(playArea).drag()
    const banana = new Rectangle(60,120).centerReg(playArea).drag()


    STYLE = {
		List: {
			vertical: true, 
			spacing: 10, 
			backdropColor:faint,  
			drop:true, dropCopy:false, 
			dropEnd:false, 
            dropTargets:{noPick:target.items}, 
			dropSelf:true
		}
	};
	const items = [apple, banana];
	const list = new List(200, 600, items).center().mov(400, 0);
	



    apple.on("pressup", ()=>{

        zog(apple.x, apple.y)
        apple.loc(Math.round((apple.x-apple.width/2)/gridBlock)*gridBlock+apple.width/2, Math.round((apple.y-apple.height/2)/gridBlock)*gridBlock+apple.height/2)
        S.update()
        if (apple.x <0 + apple.width/2){
            apple.x = + apple.width/2
        } else if (apple.x > bentoW-20-apple.width/2){
            apple.x = bentoW-20-apple.width/2
        }

        if (apple.y < 0+ apple.height/2){
            apple.y = 0 + apple.height/2
        } else if (apple.y > bentoH-20-apple.height/2){
            apple.y = bentoH-20-apple.height/2
        }
    }) //end of pressup


   


} // end ready

</script>
<meta name="viewport" content="width=device-width, user-scalable=no" />
</head>
<body></body>
</html>